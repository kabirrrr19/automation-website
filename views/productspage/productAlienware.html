<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dell Alienware Order</title>
    <link rel="icon" type="image/x-icon" href="/static/assets/favicon.ico" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/static/css/prodcutPages.css">
</head>
<body>
    <div class="container mt-5 mb-5">
        <div class="row d-flex justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="text-left logo p-2 px-5"> <img src="/static/assets/img/map-image.png" width="50"> </div>
                    <div class="invoice p-5">
                        <h5>Your order Confirmed!</h5> <span class="font-weight-bold d-block mt-4">Hello, Admin</span> <span>You order has been confirmed and will be shipped in next two days!</span>
                        <div class="payment border-top mt-3 mb-3 border-bottom table-responsive">
                            <table class="table table-borderless">
                                <tbody>
                                    <tr>
                                        <td>
                                        <div class="py-2"> <span class="d-block text-muted">Order Date</span> <span>23 Jan 2037</span> </div>
                                    </td>
                                    <td>
                                        <div class="py-2"> <span class="d-block text-muted">Order No</span> <span>MT12332345</span> </div>
                                    </td>
                                    <td>
                                        <div class="py-2"> <span class="d-block text-muted">Payment</span> <span><img src="/static/assets/img/cash-on-delivery.png" width="50" /></span> </div>
                                    </td>
                                    <td>
                                        <div class="py-2"> <span class="d-block text-muted">Shiping Address</span> <span>221B, Baker Street, London.</span> </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="product border-bottom table-responsive">
                        <div class="col mb-5">
                            <div class="card h-100">
                                <!-- Product image-->
                                <img class="img-fluid mx-auto" width="250" loading="lazy" src="/static/assets/img/products/laptop-dell.webp" alt="Product Image"/>
                                <!-- Product details-->
                                <div class="card-body p-4">
                                    <div class="text-center">
                                        <!-- Product name-->
                                        <h5 class="fw-bolder">Dell Alienware</h5>
                                        <!-- Product price-->
                                        ₹ 58,890
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row d-flex justify-content-center">
                        <div class="col-md-5">
                            <table class="table table-borderless">
                                <tbody class="totals">
                                    <tr>
                                        <td>
                                            <div class="text-left"> <span class="text-muted">Subtotal</span> </div>
                                        </td>
                                        <td>
                                            <div class="text-right"> <span>$58,890</span> </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="text-left"> <span class="text-muted">Shipping Fee</span> </div>
                                        </td>
                                        <td>
                                            <div class="text-right"> <span>₹ 0</span> </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="text-left"> <span class="text-muted">Tax Fee</span> </div>
                                        </td>
                                        <td>
                                            <div class="text-right"> <span>₹ 890</span> </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="text-left"> <span class="text-muted">Discount</span> </div>
                                        </td>
                                        <td>
                                            <div class="text-right"> <span class="text-success">₹ 10,210</span> </div>
                                        </td>
                                    </tr>
                                    <tr class="border-top border-bottom">
                                        <td>
                                            <div class="text-left"> <span class="font-weight-bold">Subtotal</span> </div>
                                        </td>
                                        <td>
                                            <div class="text-right"> <span class="font-weight-bold">₹ 49,710</span> </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <p>We will be sending shipping confirmation email when the item shipped successfully!</p>
                    <p class="font-weight-bold mb-0">Team Automate your way!</span>
                    </div>
                    <div class="d-flex justify-content-between footer p-4"> <h5 class="font-weight-bold mb-0 h5">Thanks for shopping with us!</h5> <h5 class="h5">23 Jan, 2037</h5> </div>
            </div>
            <button id="rzp-button1" type="button" class="btn btn-block btn-primary py-2 my-5 btn-lg"><a style="color:white;text-decoration:none;">Make Payment</a></button>
            
            <!-- <button type="button" class="btn btn-block btn-danger btn-lg"><a style="color:white;text-decoration:none;" href="/route/success">success</a></button> -->
        </div>
    </div>
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script
  src="https://code.jquery.com/jquery-3.3.1.js"
  integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
  crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
$(document).ready(function(){
    document.getElementById('rzp-button1').onclick =  async function(e){
        const data = await fetch('http://localhost:3000/route/razorpay', { method: 'POST' }).then((t) => t.json()); 
        // console.log("function me data hai ye");
        // console.log(data);  
        var options = {
            "key": "rzp_test_vUKeh9GnlhSIOV", // Enter the Key ID generated from the Dashboard
            "amount": data.amount, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
            "currency": data.currency,
            "name": "Automate Your Way",
            "description": "Dell Alienware",
            "image": "/assets/img/products/laptop-dell.webp",
            // "order_id": data.id, 
            //This is the id from the razorpay server and in test mode this will throw an error
            // as the id is not on the server of r
            "handler": function (response){
                alert(response.razorpay_payment_id);
                // These two are undefined in the test mode
                // alert(response.razorpay_order_id);
                // alert(response.razorpay_signature)  
                location.href = "/route/success/";
            },
            "theme": {
                "color": "#267EF3"
            }
           
            
        }; 

        var rzp1 = new Razorpay(options);
        rzp1.on('payment.failed', function (response){
                // alert(response.error.code);
                alert(response.error.description + " your payment has failed. Please try again.");
                // alert(response.error.source);
                // alert(response.error.step);
                alert(response.error.reason);
                // alert(response.error.metadata.order_id);
                // alert(response.error.metadata.payment_id);
        });

        rzp1.open();
        e.preventDefault();

        
    }

});

</script>



</body>
</html>